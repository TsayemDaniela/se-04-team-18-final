<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Dashboard</title>
    
     <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">

</head>


<body class="bg-nav">

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">Beer Game</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            
          </ul>
          <div>
            <a class="nav-link" href="/student_logout">Logout</a>
          </div>
        </div>
      </div>
  </nav>

  <div class="c-top-container c-table-student">
    <h2>{{session['student_name']}}</h2>

    <div class="c-top-btn-group">
      <div class="input-group no-margin">
        <input type="text" class="form-control" aria-label="Recipient's username" placeholder="Filter" aria-describedby="button-addon2" id="myInput" onkeyup="search_table()">
      </div>
    </div>
  </div>

  <div class="c-table-container c-table-student">
    <table class="table table-striped" id="myTable">
      <thead>
        <tr class="top-tr">
          <th scope="col">Instructor Name</th>
          <th scope="col">Game ID</th>
          <th scope="col">Instructor email</th>
          <th scope="col">Game Link</th>

        </tr>
      </thead>
      <tbody>

        {% for game in games %}
        <tr>
          <th class="th-num" scope="row">{{game['instructor']['name']}}</th>
          <td>
            <span>{{game['id']}}</span>
          </td>
          <td>
            <span>{{game['instructor']['email']}}</span>
          </td>
          <td>
            <form action="/game_screen/{{game['id']}}" id="search" method="post">
              <input type="hidden" name='game_id' value="{{game['id']}}">
              <input type="hidden" name='student_name' value="{{session['student_name']}}">
              <input type="submit" value="Play">
         </form>
          </td> 
        </tr>
        {% endfor %}

      </tbody>
    </table>
  </div>


  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
  <script>
  function search_table(){
    // Declare variables 
    var input, filter, table, tr, td, i;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");
  
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 0; i < tr.length; i++) {
      td = tr[i].getElementsByTagName("td") ; 
      for(j=0 ; j<td.length ; j++)
      {
        let tdata = td[j] ;
        if (tdata) {
          if (tdata.innerHTML.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
            break ; 
          } else {
            tr[i].style.display = "none";
          }
        } 
      }
    }
  }
  </script>
      
</body>